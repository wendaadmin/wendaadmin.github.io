import{d as q,r as V,e as y,X as w,o as F,c as O,g as t,w as r,u as s,b as U,h as _,E as c,G as k,H as B,l as C,K as N,L as D}from"./entry.a0a37a93.js";/* empty css                */import"./request.aa736d9d.js";import{m as M,o as S}from"./el-loading.13fc1bcd.js";const A={class:"flex items-center justify-center"},P=q({__name:"AddOrEdit",props:{dialogVisible:{type:Boolean,default:!1},item:{default:null}},emits:["update:closeDialog","update:success"],setup(h,{emit:p}){const u=h,m=V(!1),i=V(null),v=y({name:[{required:!0,message:"请输入",trigger:"blur"}],sfzid:[{required:!0,message:"请输入",trigger:"blur"}],email:[{required:!0,message:"请输入",trigger:"blur"}],phone:[{required:!0,message:"请输入",trigger:"blur"}],address:[{required:!0,message:"请输入",trigger:"blur"}],status:[{required:!0,message:"请输入",trigger:"blur"}]}),e=y({id:null,name:"",sfzid:"",email:"",phone:"",address:"",status:0}),f=()=>{const a=u.item?JSON.parse(JSON.stringify(u.item)):null;a&&a.id!==void 0&&a.id!==null?(e.id=a.id,e.name=a.name??"",e.sfzid=a.sfzid??"",e.email=a.email??"",e.phone=a.phone??"",e.address=a.address??"",e.status=a.status??0):(e.id=null,e.name="",e.sfzid="",e.email="",e.phone="",e.address="",e.status=0,i.value&&i.value.clearValidate())},g=()=>{p("update:closeDialog"),e.id=null,e.name="",e.sfzid="",e.email="",e.phone="",e.address="",e.status=0,i.value&&(i.value.resetFields(),i.value.clearValidate())},z=async a=>{if(a&&!m.value){try{await a.validate()}catch{return}m.value=!0;try{const l={name:e.name,sfzid:e.sfzid,email:e.email,phone:e.phone,address:e.address,status:e.status};let o;e.id?o=await M(e.id,{...l}):o=await S({...l}),o&&o.code===200?(c.success(o.msg||"操作成功"),p("update:closeDialog"),p("update:success")):c.error((o==null?void 0:o.msg)||"操作失败")}catch{c.error("请求出错")}finally{m.value=!1}}};return w(()=>u.item,a=>{u.dialogVisible&&f()},{immediate:!1}),w(()=>u.dialogVisible,a=>{a&&f()}),(a,l)=>{const o=k,n=B,b=C,x=N,E=D;return F(),O("div",null,[t(E,{title:s(e).id?"编辑":"新增",draggable:"","model-value":a.dialogVisible,top:"20px",style:{"border-radius":"10px","padding-bottom":"20px"},width:"450px",class:"px-5","align-center":"",onClose:g,onOpen:f,"destroy-on-close":!0},{default:r(()=>[t(x,{ref_key:"ruleFormRef",ref:i,class:"w-full",inline:!0,"label-position":"right",model:s(e),"label-width":"100px",rules:s(v)},{default:r(()=>[t(n,{label:"姓名:",prop:"name",class:"w-full"},{default:r(()=>[t(o,{style:{width:"100%"},modelValue:s(e).name,"onUpdate:modelValue":l[0]||(l[0]=d=>s(e).name=d),placeholder:"请输入",clearable:""},null,8,["modelValue"])]),_:1}),t(n,{label:"身份证号:",prop:"sfzid",class:"w-full"},{default:r(()=>[t(o,{style:{width:"100%"},modelValue:s(e).sfzid,"onUpdate:modelValue":l[1]||(l[1]=d=>s(e).sfzid=d),placeholder:"请输入",clearable:""},null,8,["modelValue"])]),_:1}),t(n,{label:"邮箱:",prop:"email",class:"w-full"},{default:r(()=>[t(o,{style:{width:"100%"},modelValue:s(e).email,"onUpdate:modelValue":l[2]||(l[2]=d=>s(e).email=d),placeholder:"请输入",clearable:""},null,8,["modelValue"])]),_:1}),t(n,{label:"电话号码:",prop:"phone",class:"w-full"},{default:r(()=>[t(o,{style:{width:"100%"},modelValue:s(e).phone,"onUpdate:modelValue":l[3]||(l[3]=d=>s(e).phone=d),placeholder:"请输入",clearable:""},null,8,["modelValue"])]),_:1}),t(n,{label:"地址:",prop:"address",class:"w-full"},{default:r(()=>[t(o,{style:{width:"100%"},modelValue:s(e).address,"onUpdate:modelValue":l[4]||(l[4]=d=>s(e).address=d),placeholder:"请输入",clearable:""},null,8,["modelValue"])]),_:1}),t(n,{label:"状态:",prop:"status",class:"w-full"},{default:r(()=>[t(o,{style:{width:"100%"},modelValue:s(e).status,"onUpdate:modelValue":l[5]||(l[5]=d=>s(e).status=d),placeholder:"请输入",clearable:""},null,8,["modelValue"])]),_:1}),U("div",A,[t(b,{type:"info",onClick:g},{default:r(()=>[_("取消")]),_:1}),t(b,{loading:s(m),type:"primary",onClick:l[6]||(l[6]=d=>z(s(i)))},{default:r(()=>[_("保存")]),_:1},8,["loading"])])]),_:1},8,["model","rules"])]),_:1},8,["title","model-value"])])}}});export{P as _};
