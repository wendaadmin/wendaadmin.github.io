import{d as E,r as b,k as _,o as U,c as B,g as t,w as r,u as s,b as C,m as y,q as V,I as M,J as N,v as O,M as D,N as I}from"./entry.bc950601.js";import{_ as $}from"./client-only.4ca5dd63.js";/* empty css                */import{l as A,m as P}from"./el-loading.f1cd27cb.js";const R={class:"flex items-center justify-center"},S=E({__name:"AddOrEdit",props:{dialogVisible:{type:Boolean,default:!1},item:{default:null}},emits:["update:closeDialog","update:success"],setup(w,{emit:f}){const a=w,m=b(!1),p=b(),h=_({name:[{required:!0,message:"请输入",trigger:"blur"}],sfzid:[{required:!0,message:"请输入",trigger:"blur"}],email:[{required:!0,message:"请输入",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],phone:[{required:!0,message:"请输入",trigger:"blur"}],address:[{required:!0,message:"请输入",trigger:"blur"}],status:[{required:!0,message:"请输入",trigger:"blur"}]}),e=_({id:null,name:"",sfzid:"",email:"",phone:"",address:"",status:0}),v=i=>{i&&i.resetFields()},x=async i=>{i&&(m.value||await i.validate(async(l,u)=>{var n;if(l)try{m.value=!0;let d;(n=a.item)!=null&&n.id?d=await A(a.item.id,e):(delete e.id,d=await P(e)),d.code==200?(V.success({message:d.msg||"success",grouping:!0,type:"success"}),f("update:success"),c()):V.error({message:d.msg,grouping:!0,type:"error"})}catch{}finally{m.value=!1}}))},c=()=>{f("update:closeDialog")},q=async()=>{var i;v(p.value),(i=a.item)!=null&&i.id&&(e.id=a.item.id,e.email=a.item.email,e.phone=a.item.phone,e.name=a.item.name,e.sfzid=a.item.sfzid,e.address=a.item.address,e.status=a.item.status)};return(i,l)=>{const u=M,n=N,d=O,z=D,F=I,k=$;return U(),B("div",null,[t(k,null,{default:r(()=>{var g;return[t(F,{title:(g=a.item)!=null&&g.id?"编辑":"新增",draggable:"","model-value":i.$props.dialogVisible,top:"20px",style:{"border-radius":"10px","padding-bottom":"20px"},width:"450px",class:"px-5","align-center":"",onClose:c,onOpen:l[7]||(l[7]=o=>q())},{default:r(()=>[t(z,{ref_key:"ruleFormRef",ref:p,class:"w-full",inline:!0,"label-position":"right",model:s(e),"label-width":"100px",rules:s(h)},{default:r(()=>[t(n,{label:"姓名:",prop:"name",class:"w-full"},{default:r(()=>[t(u,{style:{width:"100%"},"controls-position":"right",modelValue:s(e).name,"onUpdate:modelValue":l[0]||(l[0]=o=>s(e).name=o),placeholder:"请输入",clearable:""},null,8,["modelValue"])]),_:1}),t(n,{label:"身份证号:",prop:"sfzid",class:"w-full"},{default:r(()=>[t(u,{style:{width:"100%"},"controls-position":"right",modelValue:s(e).sfzid,"onUpdate:modelValue":l[1]||(l[1]=o=>s(e).sfzid=o),placeholder:"请输入",clearable:""},null,8,["modelValue"])]),_:1}),t(n,{label:"邮箱:",prop:"email",class:"w-full"},{default:r(()=>[t(u,{style:{width:"100%"},"controls-position":"right",modelValue:s(e).email,"onUpdate:modelValue":l[2]||(l[2]=o=>s(e).email=o),placeholder:"请输入",clearable:""},null,8,["modelValue"])]),_:1}),t(n,{label:"电话号码:",prop:"phone",class:"w-full"},{default:r(()=>[t(u,{style:{width:"100%"},"controls-position":"right",modelValue:s(e).phone,"onUpdate:modelValue":l[3]||(l[3]=o=>s(e).phone=o),placeholder:"请输入",clearable:""},null,8,["modelValue"])]),_:1}),t(n,{label:"地址:",prop:"address",class:"w-full"},{default:r(()=>[t(u,{style:{width:"100%"},"controls-position":"right",modelValue:s(e).address,"onUpdate:modelValue":l[4]||(l[4]=o=>s(e).address=o),placeholder:"请输入",clearable:""},null,8,["modelValue"])]),_:1}),t(n,{label:"状态:",prop:"status",class:"w-full"},{default:r(()=>[t(u,{style:{width:"100%"},"controls-position":"right",modelValue:s(e).status,"onUpdate:modelValue":l[5]||(l[5]=o=>s(e).status=o),placeholder:"请输入",clearable:""},null,8,["modelValue"])]),_:1}),C("div",R,[t(d,{type:"info",onClick:c},{default:r(()=>[y(" 取消 ")]),_:1}),t(d,{loading:s(m),type:"primary",onClick:l[6]||(l[6]=o=>x(s(p)))},{default:r(()=>[y(" 保存 ")]),_:1},8,["loading"])])]),_:1},8,["model","rules"])]),_:1},8,["title","model-value"])]}),_:1})])}}});export{S as _};
