import{d as I,r as _,k as w,l as L,o as E,c as H,g as a,w as i,b as x,u as n,m as p,n as O,f as U,q as m,s as j,v as M,E as P,i as V,x as F,y as S,z as q,A as G,B as W,C as J,D as K,G as Q}from"./entry.2d93dd6e.js";import{_ as R}from"./el-select.e4158e51.js";import{_ as X}from"./client-only.d6f0faf2.js";/* empty css                *//* empty css                     *//* empty css                  */import{s as Y,n as Z,a as ee}from"./el-loading.50c2667e.js";import{d as te}from"./dataExcelExport.a617cdae.js";import"./request.95e798cb.js";const ae={class:"w-full h-full flex flex-col justify-between"},ne={class:"w-full flex-1 pt-5"},le={class:"flex items-center justify-center"},_e=I({__name:"nameList",emits:["update:lookItem"],setup(se,{emit:oe}){const y=_(!1),b=_(),f=_(!1),v=_(!1),u=w({content:[],totalElements:0}),r=w({page:1,limit:20}),C=e=>{y.value=!0,b.value=e},k=e=>{r.page=e,c()},h=e=>{r.limit=e,c()},c=async()=>{try{f.value=!0;const e=await Y(r);e.code===200?(u.content=e.data,u.totalElements=e.total):m.error(e.msg)}catch{}finally{f.value=!1}},z=async()=>{const e=document.createElement("input");e.type="file",e.accept=".csv",e.onchange=async t=>{const l=t.target.files;if(l&&l.length>0){const s=l[0],g=new FormData;g.append("file",s);try{v.value=!0;const d=await Z(g);d.code===200?(m.success(d.msg),c()):m.error(d.msg)}catch(d){m.error("导入失败: "+(d.message||"未知错误"))}finally{v.value=!1}}},e.click()},B=async()=>{try{await te("人员导入模板",[["name","phone","sfzid","email","address","status"]],[])}catch{}finally{}},D=e=>{j.confirm("确定删除该条数据?","Warning",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then(async()=>{const t=await ee(e);t.code==200?(m({type:"success",message:t.msg}),c()):m({type:"error",message:t.msg})}).catch(()=>{m({type:"info",message:"Delete canceled"})})};return L(()=>{c()}),(e,t)=>{const l=M,s=P,g=V,d=F,$=R,N=X,T=S;return E(),H("div",ae,[a(N,null,{default:i(()=>[x("div",null,[a(l,{type:"info",onClick:B,icon:n(q)},{default:i(()=>[p("下载模板")]),_:1},8,["icon"]),a(l,{type:"success",onClick:z,loading:n(v),icon:n(G)},{default:i(()=>[p("导入")]),_:1},8,["loading","icon"]),a(l,{type:"success",onClick:t[0]||(t[0]=o=>C({})),icon:n(W)},{default:i(()=>[p("新增")]),_:1},8,["icon"]),a(l,{type:"primary",onClick:t[1]||(t[1]=o=>c()),loading:n(f),icon:n(J)},{default:i(()=>[p("查询")]),_:1},8,["loading","icon"])]),x("div",ne,[O((E(),U(g,{data:n(u).content,style:{width:"100%"},border:"",height:"700px"},{default:i(()=>[a(s,{type:"index",label:"序号",fixed:"",align:"center",width:"70px"}),a(s,{prop:"name",label:"姓名",fixed:"",align:"center"}),a(s,{prop:"phone",label:"电话",fixed:"",align:"center"}),a(s,{prop:"sfzid",label:"身份证号",fixed:"",align:"center"}),a(s,{prop:"email",label:"邮箱",fixed:"",align:"center"}),a(s,{prop:"address",label:"地址",fixed:"",align:"center"}),a(s,{prop:"status",label:"状态",fixed:"",align:"center"}),a(s,{align:"center",label:"操作"},{default:i(o=>[a(l,{link:"",size:"small",type:"success",onClick:A=>C(o.row),icon:n(K)},{default:i(()=>[p(" 编辑 ")]),_:2},1032,["onClick","icon"]),a(l,{link:"",size:"small",type:"danger",onClick:A=>D(o.row.id),icon:n(Q)},{default:i(()=>[p(" 删除 ")]),_:2},1032,["onClick","icon"])]),_:1})]),_:1},8,["data"])),[[T,n(f)]])]),x("div",le,[a(d,{"current-page":n(r).page,"onUpdate:currentPage":t[2]||(t[2]=o=>n(r).page=o),"page-size":n(r).limit,"onUpdate:pageSize":t[3]||(t[3]=o=>n(r).limit=o),"page-sizes":[20,50,100,500,1e3],layout:"total, sizes, prev, pager, next, jumper",total:n(u).totalElements,onCurrentChange:k,onSizeChange:h},null,8,["current-page","page-size","total"])]),a($,{"dialog-visible":n(y),"onUpdate:closeDialog":t[4]||(t[4]=o=>y.value=!1),"onUpdate:success":t[5]||(t[5]=o=>c()),item:n(b)},null,8,["dialog-visible","item"])]),_:1})])}}});export{_e as default};
