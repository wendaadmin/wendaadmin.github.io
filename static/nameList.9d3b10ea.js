import{d as j,r as _,e as w,f as I,o as C,c as U,g as a,w as s,b as f,u as n,h as p,i as H,j as O,E as m,k as M,l as P,m as V,n as F,q as S,s as q,v as R,t as W,x as G,y as J,z as K,A as Q,B as X}from"./entry.dd691c49.js";import{_ as Y}from"./el-select.bfdefec9.js";import{_ as Z}from"./client-only.b9b7a74d.js";import"./request.b8f4b186.js";/* empty css                  */import{s as ee,n as te,a as ae}from"./el-loading.b0ad87ab.js";/* empty css                */import{d as ne}from"./dataExcelExport.a617cdae.js";const le=""+globalThis.__publicAssetsURL("images/name.png"),se={class:"w-full h-full flex flex-col justify-between"},oe=f("div",{class:"w-full h-[100px]"},[f("img",{src:le,alt:"",class:"w-full h-full object-contain"})],-1),ie={class:"w-full flex-1 pt-5"},ce={class:"flex items-center justify-center"},xe=j({__name:"nameList",emits:["update:lookItem"],setup(re,{emit:de}){const v=_(!1),b=_(),u=_(!1),y=_(!1),g=w({content:[],totalElements:0}),c=w({page:1,limit:20}),h=e=>{v.value=!0,b.value=e},E=e=>{c.page=e,r()},k=e=>{c.limit=e,r()},r=async()=>{try{u.value=!0;const e=await ee(c);e.code===200?(g.content=e.data,g.totalElements=e.total):m.error(e.msg)}catch{}finally{u.value=!1}},z=async()=>{const e=document.createElement("input");e.type="file",e.accept=".csv",e.onchange=async t=>{const o=t.target.files;if(o&&o.length>0){const x=o[0],l=new FormData;l.append("file",x);try{y.value=!0;const d=await te(l);d.code===200?(m.success(d.msg),r()):m.error(d.msg)}catch(d){m.error("导入失败: "+(d.message||"未知错误"))}finally{y.value=!1}}},e.click()},B=async()=>{try{await ne("人员导入模板",[["name","sfzid","email","phone","address","status"]],[])}catch{}finally{}},D=e=>{M.confirm("确定删除该条数据?","Warning",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then(async()=>{const t=await ae(e);t.code==200?(m({type:"success",message:t.msg}),r()):m({type:"error",message:t.msg})}).catch(()=>{m({type:"info",message:"Delete canceled"})})};return I(()=>{r()}),(e,t)=>{const o=P,x=V,l=F,d=S,T=q,$=Y,A=Z,L=R;return C(),U("div",se,[a(A,null,{default:s(()=>[f("div",null,[a(x,{placement:"top",effect:"dark"},{content:s(()=>[oe]),default:s(()=>[a(o,{type:"info",onClick:B,icon:n(W)},{default:s(()=>[p("下载模板")]),_:1},8,["icon"])]),_:1}),a(o,{type:"success",onClick:z,loading:n(y),icon:n(G)},{default:s(()=>[p("导入")]),_:1},8,["loading","icon"]),a(o,{type:"success",onClick:t[0]||(t[0]=i=>h({})),icon:n(J)},{default:s(()=>[p("新增")]),_:1},8,["icon"]),a(o,{type:"primary",onClick:t[1]||(t[1]=i=>r()),loading:n(u),icon:n(K)},{default:s(()=>[p("查询")]),_:1},8,["loading","icon"])]),f("div",ie,[H((C(),O(d,{data:n(g).content,style:{width:"100%"},border:"",height:"700px"},{default:s(()=>[a(l,{type:"index",label:"序号",fixed:"",align:"center",width:"70px"}),a(l,{prop:"name",label:"姓名",fixed:"",align:"center"}),a(l,{prop:"sfzid",label:"身份证号",fixed:"",align:"center"}),a(l,{prop:"phone",label:"电话",fixed:"",align:"center"}),a(l,{prop:"email",label:"邮箱",fixed:"",align:"center"}),a(l,{prop:"address",label:"地址",fixed:"",align:"center"}),a(l,{prop:"status",label:"状态",fixed:"",align:"center"}),a(l,{align:"center",label:"操作"},{default:s(i=>[a(o,{link:"",size:"small",type:"success",onClick:N=>h(i.row),icon:n(Q)},{default:s(()=>[p(" 编辑 ")]),_:2},1032,["onClick","icon"]),a(o,{link:"",size:"small",type:"danger",onClick:N=>D(i.row.id),icon:n(X)},{default:s(()=>[p(" 删除 ")]),_:2},1032,["onClick","icon"])]),_:1})]),_:1},8,["data"])),[[L,n(u)]])]),f("div",ce,[a(T,{"current-page":n(c).page,"onUpdate:currentPage":t[2]||(t[2]=i=>n(c).page=i),"page-size":n(c).limit,"onUpdate:pageSize":t[3]||(t[3]=i=>n(c).limit=i),"page-sizes":[20,50,100,500,1e3],layout:"total, sizes, prev, pager, next, jumper",total:n(g).totalElements,onCurrentChange:E,onSizeChange:k},null,8,["current-page","page-size","total"])]),a($,{"dialog-visible":n(v),"onUpdate:closeDialog":t[4]||(t[4]=i=>v.value=!1),"onUpdate:success":t[5]||(t[5]=i=>r()),item:n(b)},null,8,["dialog-visible","item"])]),_:1})])}}});export{xe as default};
