import{d as $,r as _,e as C,f as j,o as E,c as O,b as u,g as t,w as o,u as a,h as p,i as U,j as H,E as m,k as I,l as S,m as M,n as P,q as V,s as F,v as J,t as q,x as R,y as W,z as G,A as K,B as Q}from"./entry.d462ef47.js";import{_ as X}from"./el-select.1647c36c.js";import"./request.3721512c.js";/* empty css                  */import{s as Y,n as Z,a as ee}from"./el-loading.83753e2b.js";/* empty css                */import{d as te}from"./dataExcelExport.a617cdae.js";const ae=""+globalThis.__publicAssetsURL("images/name.png"),ne={class:"w-full h-full flex flex-col justify-between"},le=u("div",{class:"w-full h-[100px]"},[u("img",{src:ae,alt:"",class:"w-full h-full object-contain"})],-1),se={class:"w-full flex-1 pt-5"},oe={class:"flex items-center justify-center"},ge=$({__name:"nameList",setup(ie){const v=_(!1),x=_(null),f=_(!1),b=_(!1),g=C({content:[],totalElements:0}),c=C({page:1,limit:20}),h=e=>{x.value=null,e&&e.id!==void 0&&(x.value=JSON.parse(JSON.stringify(e))),v.value=!0},k=e=>{c.page=e,r()},w=e=>{c.limit=e,r()},r=async()=>{try{f.value=!0;const e=await Y(c);e.code===200?(g.content=e.data,g.totalElements=e.total):m.error(e.msg)}catch{}finally{f.value=!1}},z=async()=>{const e=document.createElement("input");e.type="file",e.accept=".csv",e.onchange=async n=>{const s=n.target.files;if(s&&s.length>0){const y=s[0],l=new FormData;l.append("file",y);try{b.value=!0;const d=await Z(l);d.code===200?(m.success(d.msg),r()):m.error(d.msg)}catch{m.error("导入失败")}finally{b.value=!1}}},e.click()},B=async()=>{await te("人员导入模板",[["name","sfzid","email","phone","address","status"]],[])},N=e=>{I.confirm("确定删除该条数据?","Warning",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then(async()=>{const n=await ee(e);n.code==200?(m.success(n.msg),r()):m.error(n.msg)})};return j(()=>{r()}),(e,n)=>{const s=S,y=M,l=P,d=V,T=F,D=X,A=J;return E(),O("div",ne,[u("div",null,[t(y,{placement:"top",effect:"dark"},{content:o(()=>[le]),default:o(()=>[t(s,{type:"info",onClick:B,icon:a(q)},{default:o(()=>[p("下载模板")]),_:1},8,["icon"])]),_:1}),t(s,{type:"success",onClick:z,loading:a(b),icon:a(R)},{default:o(()=>[p(" 导入 ")]),_:1},8,["loading","icon"]),t(s,{type:"success",onClick:n[0]||(n[0]=i=>h(null)),icon:a(W)},{default:o(()=>[p(" 新增 ")]),_:1},8,["icon"]),t(s,{type:"primary",onClick:n[1]||(n[1]=i=>r()),loading:a(f),icon:a(G)},{default:o(()=>[p(" 查询 ")]),_:1},8,["loading","icon"])]),u("div",se,[U((E(),H(d,{data:a(g).content,border:"",height:"700px"},{default:o(()=>[t(l,{type:"index",label:"序号",fixed:"",align:"center",width:"70px"}),t(l,{prop:"name",label:"姓名",fixed:"",align:"center"}),t(l,{prop:"sfzid",label:"身份证号",fixed:"",align:"center"}),t(l,{prop:"phone",label:"电话",fixed:"",align:"center"}),t(l,{prop:"email",label:"邮箱",fixed:"",align:"center"}),t(l,{prop:"address",label:"地址",fixed:"",align:"center"}),t(l,{prop:"status",label:"状态",fixed:"",align:"center"}),t(l,{align:"center",label:"操作"},{default:o(i=>[t(s,{link:"",size:"small",type:"success",onClick:L=>h(i.row),icon:a(K)},{default:o(()=>[p(" 编辑 ")]),_:2},1032,["onClick","icon"]),t(s,{link:"",size:"small",type:"danger",onClick:L=>N(i.row.id),icon:a(Q)},{default:o(()=>[p(" 删除 ")]),_:2},1032,["onClick","icon"])]),_:1})]),_:1},8,["data"])),[[A,a(f)]])]),u("div",oe,[t(T,{"current-page":a(c).page,"onUpdate:currentPage":n[2]||(n[2]=i=>a(c).page=i),"page-size":a(c).limit,"onUpdate:pageSize":n[3]||(n[3]=i=>a(c).limit=i),"page-sizes":[20,50,100,500,1e3],layout:"total, sizes, prev, pager, next, jumper",total:a(g).totalElements,onCurrentChange:k,onSizeChange:w},null,8,["current-page","page-size","total"])]),t(D,{"dialog-visible":a(v),item:a(x),"onUpdate:closeDialog":n[4]||(n[4]=i=>v.value=!1),"onUpdate:success":r},null,8,["dialog-visible","item"])])}}});export{ge as default};
